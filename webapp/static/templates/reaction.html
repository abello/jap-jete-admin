<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Reaction</title>
</head>
<body>
  <div id="greeting"></div>
  <h1>To every action, there is always opposed an equal reaction.</h1>
  <img src="https://s-media-cache-ak0.pinimg.com/564x/53/e4/14/53e4144326d7196e0102badc23ca45f4.jpg" alt="Newton's III law of (e)motion" />


  <!-- Dependencies for React and the API client -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <!-- React.js fetching data from the API service -->
  <script type="text/babel">
    var ServerCall = React.createClass({
      getInitialState: function() {
        return {
          message: ''
        }
      },

      componentDidMount: function() {
        this.serverRequest = $.get(this.props.source, function(result) {
          this.setState({
            message: result.message
          });
        }.bind(this));
      },

      componentWillUnount: function() {
        this.serverRequest.abort();
      },

      render: function() {
        return (
          <div>
            Server says: "{this.state.message}".
          </div>
        );
      }
    });

    ReactDOM.render(
      <ServerCall source="/api/v1/hello"/>,
      document.getElementById('greeting')
    );
    // that's it, really
  </script>
</body>
</html>
